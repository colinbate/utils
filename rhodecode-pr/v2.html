<!DOCTYPE html>
<html>
<head>
	<title>RhodeCode Pull Request Enhancer</title>
	<link href='../style/core.css' rel='stylesheet' type='text/css'>
</head>
<body>
	<div id="main">
		<header>
			<h1 class="container">RhodeCode Pull Request Enhancer</h1>
		</header>
		<section class="container">
			<p>Out of the box RhodeCode version 2.2.4 does not make it easy to make a pull request if the changeset you are interested in requesting be pulled is not the head of a branch or at a bookmark or tag.</p>

			<p>These bookmarklets will allow you to make pull requests based on arbitrary changesets possible and somewhat convenient.</p>

			<h2>Switch Shortlog Links</h2>
			<p>Use this bookmarklet to modify the links on the left hand "Revision" column of the repository page of the fork you want to merge into another repository. Once you run this, the links will take you to the new pull request page with some extra information about the changeset you choose.</p>
			<p>
				<a class="button" href="javascript:(function(x,i,d,a,b){a=x.querySelectorAll('#shortlog_data>table>tbody td:first-of-type>div>pre>a');b=x.querySelectorAll('#shortlog_data>table>tbody td:last-of-type>div:last-of-type>a');for(i=0;i<a.length;i++){d=a[i].getAttribute('href');a[i].setAttribute('href',d.replace('/files/','/pull-request/new#').slice(0,-1)+':'+b[i].innerText);}}(document))">Update Changeset Links (v2)</a> &larr; Drag this to your bookmarks
			</p>

			<h2>Insert Custom Changeset</h2>
			<p>Once on the new pull request page, this bookmarklet will let you insert a new changeset into the dropdown list of options. If you arrived on the page from a link generated by the previous bookmarklet, then the prompts for branch and changeset ID will be prepopulated with correct values. Otherwise just type what you want and it will add to the list. Then you can select it and fill the form normally.</p>
			<p>
				<a class="button" href="javascript:(function(d,h,b,c,g,o){h=window.location.hash.substr(1).split(':');b=prompt('Which branch?',h[1]||'default');c=prompt('Which changeset?',h[0]);if(!c||!b)return;g=d.querySelector('#org_ref>optgroup[label=Branches]');o=d.createElement('option');o.setAttribute('value','branch:'+b+':'+c);o.innerText=c;g.appendChild(o);}(document))">Insert PR Changeset (v2)</a> &larr; Drag this to your bookmarks
			</p>
		</section>
	</div>
</body>
</html>